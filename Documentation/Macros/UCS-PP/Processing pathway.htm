<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<title>acquire</title>

<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	background:#FF6600;
	font-size:20.0pt;
	font-family:"Times New Roman","serif";}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{font-size:10.0pt;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection1
	{page:WordSection1;}
-->
</style>

</head>

<body lang=EN-NZ link=blue vlink=purple>

<div class=WordSection1>

<h1>Kea Processing Pathway</h1>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>The path taken
through the various Kea procedures when initialising, running or aborting a
pulse sequence macro is quite complex. This information is not required to use
the compiler but is included for the interested reader.</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<h3><span style='font-size:13.0pt;color:#4F81BD'>Generating the user interface</span></h3>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Cal</span><span
lang=EN-GB>led from the entry macro in the UI macro (e.g. <i>:1Pulse </i>in
1Pulse.mac)</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Define window (:<i>windowdefinition</i>)</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Define all window controls and the container window</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Set all the control ranges and data types</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Get sequence
parameters (:<i>getseqpar</i>)</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Returns the pulse program relationship list</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Returns the pulse program parameter name list</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Returns the pulse program variable name list</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Returns the compiled pulse program name (e.g. 1Pulse.p)</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Returns the pulse program phase list</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Set-up interface
(<i>keaCtrl:setUp</i>)</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Set up all window variables</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Cache important macros</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Load last GUI parameters</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Check type of Kea</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Load general Kea preferences</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Set UI window size and title</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Load common NMR parameters</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Check if an experiment is already running</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Show window</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Finish</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<h3><span style='font-size:13.0pt;color:#4F81BD'>Running an experiment</span></h3>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Executed when
the Run button is pressed.</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Get sequence
parameters (<i>:getseqpar</i>)</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Returns the pulse program relationship list</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Returns the pulse program parameter name list</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Returns the pulse program variable name list</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Returns the compiled pulse program name (e.g. 1Pulse.p)</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Execute the run
procedure (<i>keaCtrl:runPP</i>)</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><span
lang=EN-GB>Initialise pulse parameter list procedure (<i>keaCtrl:initializePP</i>)</span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify'><span
lang=EN-GB>Check for Kea connection and get special kea parameters</span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify'><span
lang=EN-GB>Load general Kea preferences</span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify'><span
lang=EN-GB>Get Kea GUI parameters (<i>keaCtrl:startPP</i>)</span></p>

<p class=MsoNormal style='margin-left:108.0pt;text-align:justify'><span
lang=EN-GB>Read parameters from GUI</span></p>

<p class=MsoNormal style='margin-left:108.0pt;text-align:justify'><span
lang=EN-GB>Check these parameters</span></p>

<p class=MsoNormal style='margin-left:108.0pt;text-align:justify'><span
lang=EN-GB>Save these parameters</span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify'><span
lang=EN-GB>Save common parameters</span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify'><span
lang=EN-GB>Check special parameters (display range, int. width)</span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-autospace:none'>Determine the
digital filters and write to the DSP</p>

<p class=MsoNormal style='margin-left:72.0pt;text-autospace:none'>Load the
pulse program (*.p) and writes to the DSP</p>

<p class=MsoNormal style='margin-left:72.0pt;text-autospace:none'>Generate and
returns the pulse program parameter list</p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify'>Return index
lists for phase and variable parameters.</p>

<p class=MsoNormal style='margin-left:45.0pt;text-align:justify'>Set a flag to show that the kea is running (no other Kea macro can run)</p>

<p class=MsoNormal style='margin-left:45.0pt;text-align:justify'>Call the <i>:execpp</i> procedure but run it in a separate thread to allow background
processing</p>

<p class=MsoNormal style='text-align:justify'>Finish</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<h3><span style='font-size:13.0pt;color:#4F81BD'>Stopping or finishing an
experiment</span></h3>

<p class=MsoNormal style='margin-left:9.0pt;text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>Executed when
the Abort or Finish buttons are pressed.</span></p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify'>Set the window variable flag <span lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:black'>wvExpStatus
</span>to either &quot;abort&quot; or &quot;finish&quot;. This will be tested
once per scan in the :execpp thread </p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify'>Finish</p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:92.15pt;text-indent:-92.15pt'><span
lang=EN-GB>&nbsp;&nbsp;</span></p>

<div style='border:none;border-top:solid windowtext 1.0pt;padding:1.0pt 0cm 0cm 0cm'>

<p class=MsoNormal style='border:none;padding:0cm'>&nbsp;</p>

</div>

<p class=MsoNormal style='text-align:justify'><i>&nbsp;Correct for Prospa
version 3.12,  1-August-2012</i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>&nbsp;</span></p>

</div>

</body>

</html>
