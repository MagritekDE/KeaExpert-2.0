<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<title>acquire</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	background:#FF6600;
	font-size:20.0pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{font-size:10.0pt;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection1
	{page:WordSection1;}
@page WordSection2
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection2
	{page:WordSection2;}
@page WordSection3
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection3
	{page:WordSection3;}
@page WordSection4
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection4
	{page:WordSection4;}
@page WordSection5
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection5
	{page:WordSection5;}
@page WordSection6
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection6
	{page:WordSection6;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-NZ link=blue vlink=purple>

<div class=WordSection1>

<h1>chirprf</h1>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-GB>This command
generates an RF pulse with a modulated amplitude and frequency.</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=263
height=163 src="shapedrf_files/image001.jpg"
alt="Description: C:\Program Files (x86)\Prospa Releases\Prospa 3.1 Release\Documentation\Macros\Kea-PP\shapedrf_files\image001.jpg"></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><i><span lang=EN-GB>Syntax</span></i></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New"'>chirprf(destination<span
style='color:black'>, ampTable, freqTable, phase, </span>tableSize<span
style='color:black'>, </span>stepTime)</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New"'>destination
...&nbsp; </span><span lang=EN-GB>“</span><span lang=EN-GB style='font-size:
10.0pt;font-family:"Courier New"'>i</span><span lang=EN-GB>” for internal – in
this case the gate pulse goes to the internal RF amplifier and the RF output is
from channel 1.</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-.25pt'><span
lang=EN-GB>“</span><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New"'>e</span><span
lang=EN-GB>” for external – in this case the gate pulse goes to pin 5 of the
external TTL port and the RF output is from channel 1.</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-.25pt'><span
lang=EN-GB>“1” for channel 1 – &nbsp;this is the same as &quot;e&quot;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-.25pt'><span
lang=EN-GB>“2” for channel 2 – in this case the gate pulse goes to pin 4 of the
external TTL port and the RF output is from channel 2.</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New"'>ampTable ....... </span><span
lang=EN-GB>the name of table which controls the amplitude during the generation
of the shaped pulse. It has the form “tx” where x is an integer greater than 0.
The table should contain positive 14 bit integers with a minimum value of 0 and
a maximum of 16383.</span><span lang=EN-US> Use the command</span><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New"'> </span><span
lang=EN-US style='font-size:11.0pt;font-family:"Courier New"'>keaNMR:convertTxGain()</span><span
lang=EN-US> to convert the amplitude in dB to one in this linear range</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New"'>freqTable ..... </span><span
lang=EN-GB>the name of table which controls the frequency of each step of the RF
pulse. It has the form “fx” where x is an integer greater than 0. The table
should contain&nbsp;pairs of positive 16 bit integers per frequency according
to the following Prospa formula:</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-autospace:none'><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>      DDSword = </span><span
style='font-size:10.0pt;font-family:"Courier New";color:green'>round</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>((fIn * 2^32d
)/1000d) </span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-autospace:none'><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>      fOut1   = </span><span
style='font-size:10.0pt;font-family:"Courier New";color:green'>single</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>((DDSword &amp;
0xFFFF0000)/(2^16)) </span><span style='font-size:10.0pt;font-family:"Courier New";
color:#AA0000'># DDS freq</span></p>

<p class=MsoNormal style='margin-left:198.5pt;text-indent:-99.25pt'><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>      fOut2   = </span><span
style='font-size:10.0pt;font-family:"Courier New";color:green'>single</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>(DDSword &amp;
0x0000FFFF)</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB>                                 Where </span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>fIn</span><span
lang=EN-GB> is the input frequency in MHz and </span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>fOut1/2</span><span lang=EN-GB>
are the output words. See below for an example.</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New"'>phase ........&nbsp;
</span><span lang=EN-GB>the name of the parameter which controls the RF pulse
phase relative to the system clock. It has the form “</span><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New"'>px</span><span lang=EN-GB>”
where </span><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New"'>x
</span><span lang=EN-GB>is an integer greater than 0. Phase values can be
0,1,2,3 corresponding to x, y, -x, –y (0, 90, 180, 270 degrees). Typically this
is used to implement phase cycling. Fractional numbers can also be applied to
implement other phases between 0 and 360 (0-4). The phase can also be supplied
as a positive 16 bit integer in which case the parameter name has the form “nx”
where x is an integer greater than 0. Constants can also be used.</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New"'>tableSize ...... </span><span
lang=EN-GB>the name of the parameter which controls the number of values in
each of the amplitude and frequency tables (the frequency table will be twice
as large as the amplitude table as it requires two numbers per frequency). It
has the form “nx” where x is an integer greater than 0 or a constant can be
supplied.</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New"'>stepTime ....... </span><span
lang=EN-GB>the name of the parameter which controls the duration of each
amplitude/frequency step. &nbsp;It has the form “dx” where x is an integer
greater than 0 or a constant can be used.</span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><i><span lang=EN-GB>Notes:</span></i></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<ol style='margin-top:0cm' start=1 type=1>
 <li class=MsoNormal><span lang=EN-GB>The pulse generated by this command has a
     length which includes a preferences defined delay called the pulse gate
     overhead (pgo). This delay is used to set up the RF gate – a signal sent
     to the high powered amplifier to switch on the DC biasing before the RF
     pulse is actually sent. You should account for this delay when writing the
     relationships list described above (the predefined variable “pgo” (pulse
     gate overhead) can be used. The minimum pgo possible with this command is 2.0
     </span><span lang=EN-GB style='font-size:11.0pt;font-family:Symbol'>m</span><span
     lang=EN-GB>s.</span></li>
</ol>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<ol style='margin-top:0cm' start=2 type=1>
 <li class=MsoNormal><span lang=EN-GB>There are a maximum number of amplitude
     steps available determined by the amount of DSP memory available. The total
     for all amplitude and phase tables must be less than 128 k 16 bit words.</span></li>
</ol>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<ol style='margin-top:0cm' start=3 type=1>
 <li class=MsoNormal><span lang=EN-GB>The stepTime value may range from 2 </span><span
     lang=EN-GB style='font-size:11.0pt;font-family:Symbol'>m</span><span
     lang=EN-GB>s to 327,670 </span><span lang=EN-GB style='font-size:11.0pt;
     font-family:Symbol'>m</span><span lang=EN-GB>s. <b>Beware</b>: values
     below 2</span><span lang=EN-GB style='font-size:11.0pt;font-family:Symbol'>
     m</span><span lang=EN-GB>s can cause the RF to switch on for very long
     times.</span></li>
</ol>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<ol style='margin-top:0cm' start=4 type=1>
 <li class=MsoNormal><span lang=EN-GB>Potentially the chirped RF pulse could
     have a large amplitude and last for a long time – the combination of these
     situation could damage a high-powered RF amplifier. Always take care when
     setting the amplitude and stepTime values. Place limits where possible.</span></li>
</ol>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-GB>&nbsp;</span></p>

<ol style='margin-top:0cm' start=5 type=1>
 <li class=MsoNormal><span lang=EN-GB>To update the chirped RF pulse between
     scans requires resending the tables to the DSP however the phase parameter
     can be applied using a phase cycle table to adjust the phase by a constant
     amount based on the scan number.</span></li>
</ol>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><i><span lang=EN-GB>&nbsp;Example pulse sequence:</span></i></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'>########################################################</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'>#</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># This pulse sequence demonstrates the
use of a </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># chirped rf pulse. It is assumes the experiment
will </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># be called ChirpedPulse</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'>#</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'>########################################################</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>procedure</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(pulse_program,dir,mode)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># Interface description (name, label,
x, y, control_type, variable_type)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>  interface = [</span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;b1Freq&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,       </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;B1
Frequency (MHz)&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,   </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;0&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;0&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>, </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;tbw&quot;</span><span style='font-size:10.0pt;font-family:
"Courier New";color:black'>, </span><span style='font-size:10.0pt;font-family:
"Courier New";color:gray'>&quot;freq&quot;</span><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>               </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;repTime&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,      </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;Repetition
time (ms)&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>, </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;0&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;1&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>, </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;tbw&quot;</span><span style='font-size:10.0pt;font-family:
"Courier New";color:black'>, </span><span style='font-size:10.0pt;font-family:
"Courier New";color:gray'>&quot;reptime&quot;</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>               </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;spAmp&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,        </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;Softpulse
amp. (dB)&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,  </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;1&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;0&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>, </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;tb&quot;</span><span style='font-size:10.0pt;font-family:
"Courier New";color:black'>,  </span><span style='font-size:10.0pt;font-family:
"Courier New";color:gray'>&quot;pulseamp&quot;</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>               </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;nrSteps&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,      </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;Number of
steps&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,      </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;1&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;1&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>, </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;tb&quot;</span><span style='font-size:10.0pt;font-family:
"Courier New";color:black'>,  </span><span style='font-size:10.0pt;font-family:
"Courier New";color:gray'>&quot;integer,[1,1000]&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>               </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;stepLength&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,   </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;Step length
(us)&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,     </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;1&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;2&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>, </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;tb&quot;</span><span style='font-size:10.0pt;font-family:
"Courier New";color:black'>,  </span><span style='font-size:10.0pt;font-family:
"Courier New";color:gray'>&quot;float, [2,100]&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>               </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;minFreq&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,      </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;Min. freq
(MHz)&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,      </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;2&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;0&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>, </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;tb&quot;</span><span style='font-size:10.0pt;font-family:
"Courier New";color:black'>,  </span><span style='font-size:10.0pt;font-family:
"Courier New";color:gray'>&quot;freq&quot;</span><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>               </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;maxFreq&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,      </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;Max. freq
(MHz)&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,      </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;2&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;1&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>, </span><span style='font-size:10.0pt;font-family:"Courier New";
color:gray'>&quot;tb&quot;</span><span style='font-size:10.0pt;font-family:
"Courier New";color:black'>,  </span><span style='font-size:10.0pt;font-family:
"Courier New";color:gray'>&quot;freq&quot;</span><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>]</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># Relationships to determine remaining
variable values</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   relationships = [</span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;d1 =
2&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                    </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;d2 =
stepLength&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                    </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;t1 =
ChirpedPulse:getAmpTable(nrSteps)* keaRun:convertTxGain(spAmp)&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                    </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;t2 =
ChirpedPulse:getFreqTable(nrSteps,minFreq,maxFreq)&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                    </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;n1 =
nrSteps&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                    </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;n2 =
nrPnts&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                    </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;a1 =
-6&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                    </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;d3 =
10&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                    </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;totPnts =
nrPnts&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>,</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                    </span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;totTime =
acqTime&quot;</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>]</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># Define the tabs and their order</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   tabs = [</span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;Pulse_sequence&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,</span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;Acquisition&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,</span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;Processing_Display_Std&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,</span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;File_Settings&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>]</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># These parameters will be changed between
experiments</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   variables = [</span><span
style='font-size:10.0pt;font-family:"Courier New";color:gray'>&quot;&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>]</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># dx,dy</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   dim = [170,26]</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># Pulse sequence</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   </span><span style='font-size:10.0pt;
font-family:"Courier New";color:#780078'>initpp</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(dir) </span><span
style='font-size:10.0pt;font-family:"Courier New";color:#AA0000'># Reset
internal parameter list</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   </span><span style='font-size:10.0pt;
font-family:"Courier New";color:#780078'>pulse</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(mode,a1,p1,d1)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   </span><span style='font-size:10.0pt;
font-family:"Courier New";color:#780078'>delay</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(d3) </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   </span><span style='font-size:10.0pt;
font-family:"Courier New";color:#780078'>chirprf</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(mode,t1,t2,p2,n1,d2)  </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   </span><span style='font-size:10.0pt;
font-family:"Courier New";color:#780078'>delay</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(d3) </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   </span><span style='font-size:10.0pt;
font-family:"Courier New";color:#780078'>acquire</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(</span><span style='font-size:
10.0pt;font-family:"Courier New";color:gray'>&quot;overwrite&quot;</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>,n2)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   lst = </span><span style='font-size:
10.0pt;font-family:"Courier New";color:#780078'>endpp</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>() </span><span
style='font-size:10.0pt;font-family:"Courier New";color:#AA0000'># Return
parameter list</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># Phase cycle</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   phaseList = [0,2;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                0,0; </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>                0,0] </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>endproc</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(lst,tabs,interface,relationships,variables,dim,phaseList)</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>To defined the tables </span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>t1</span><span
lang=EN-GB> and </span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>t2</span> <span lang=EN-GB>the following additional code is
required in the output macro ChirpedPulse.mac</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># Generate a ramped amplitude from
0-&gt;1</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>procedure</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(getAmpTable,sz)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   ampOut = </span><span
style='font-size:10.0pt;font-family:"Courier New";color:green'>linvec</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>(1/sz,1,sz)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>endproc</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(ampOut)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:#AA0000'># Generate a ramped frequency</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>procedure</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'>(getFreqTable,sz,minF,maxF)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   fIn = </span><span style='font-size:
10.0pt;font-family:"Courier New";color:green'>linvec</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>(minF,maxF,sz)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   fOut = </span><span style='font-size:
10.0pt;font-family:"Courier New";color:green'>matrix</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>(sz*2)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   q = 0</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   </span><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>for</span><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>(k = 0 </span><span style='font-size:
10.0pt;font-family:"Courier New";color:blue'>to</span><span style='font-size:
10.0pt;font-family:"Courier New";color:black'> sz-1)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>      DDSFword = </span><span
style='font-size:10.0pt;font-family:"Courier New";color:green'>round</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>((fIn[k] * 2^32d
)/1000d) </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>      fOut[q]  = </span><span
style='font-size:10.0pt;font-family:"Courier New";color:green'>single</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>((DDSFword &amp;
0xFFFF0000)/(2^16)) </span><span style='font-size:10.0pt;font-family:"Courier New";
color:#AA0000'># DDS freq</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>      fOut[q+1] = </span><span
style='font-size:10.0pt;font-family:"Courier New";color:green'>single</span><span
style='font-size:10.0pt;font-family:"Courier New";color:black'>(DDSFword &amp;
0x0000FFFF) </span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>      q = q + 2</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>   </span><span style='font-size:10.0pt;
font-family:"Courier New";color:blue'>next</span><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>(k)</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New";
color:blue'>endproc</span><span style='font-size:10.0pt;font-family:"Courier New";
color:black'>(fOut)</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=573
height=252 id="Picture 6" src="chirprf_files/image001.jpg"></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>Output, showing chirped RF pulse and TTL
gate pulse with pgo = 2 </span><span lang=EN-GB style='font-size:11.0pt;
font-family:Symbol'>m</span><span lang=EN-GB>s.</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=262
height=216 id="Picture 2" src="chirprf_files/image002.jpg"
alt="Description: I:\TEK0000.BMP"></p>

</div>

<span lang=EN-GB style='font-size:12.0pt;font-family:"Times New Roman","serif"'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection2>

<p class=MsoNormal><span lang=EN-GB><br>
<br>
</span></p>

</div>

<span lang=EN-GB style='font-size:12.0pt;font-family:"Times New Roman","serif"'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection3>

<p class=MsoNormal><span lang=EN-GB><br>
<br>
</span></p>

</div>

<span lang=EN-GB style='font-size:12.0pt;font-family:"Times New Roman","serif"'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection4>

<p class=MsoNormal><span lang=EN-GB><br>
<br>
</span></p>

</div>

<span lang=EN-GB style='font-size:12.0pt;font-family:"Times New Roman","serif"'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection5>

<p class=MsoNormal><span lang=EN-GB><br>
<br>
</span></p>

</div>

<span lang=EN-GB style='font-size:12.0pt;font-family:"Times New Roman","serif"'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection6>

<p class=MsoNormal><span lang=EN-GB><br>
<br>
</span></p>

</div>

</body>

</html>
